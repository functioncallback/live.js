<html>

<head>
  <title>mock live.js events</title>
  <script type="text/javascript" src="/javascripts/third-party/jquery.min.js"></script>
</head>

<body>
  By clicking anywhere suddenly 5k users will fire random events
  <script type="text/javascript">
    $(function () {
      events = ['home page views', 'product views', 'category browse', 'product search', 'product put in cart', 'order placement']
      function random() {
        var n = Math.round(Math.random()*50)
          , i = n<25? 0: n<35? 1: n<40? 2: n<45? 3: n<48? 4:5;
        return events[i];
      }
      $(document).click(function () {
        for (var i=0; i<5; i++) $.post('/event', { id: events[i] });
        setInterval(function () {
          for (var i=0; i<5000; i++) $.post('/event', { id: random() });
        }, 5000);
      });
    });
  </script>
</body>

</html>